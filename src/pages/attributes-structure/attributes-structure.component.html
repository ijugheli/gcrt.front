<section>
  <div class="table-container">
    <p-table sortMode="single" styleClass="p-datatable-striped p-datatable-sm" [paginator]="true"
      [rows]="25" currentPageReportTemplate="ნაჩვენებია {first} - დან {last} - მდე. სულ {totalRecords} ჩანაწერი"
      [rowsPerPageOptions]="[10, 25, 50]" [showCurrentPageReport]="true" responsiveLayout="scroll" [value]="list"
      dataKey="id" [tableStyle]="{'min-width': '60rem'}">
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 5rem"></th>
          <!-- <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th> -->
          <th>ID</th>

          <th>დასახელება</th>
          <th>ატრიბუტის ტიპი</th>
          <th>Lazy</th>
          <th>სტატუსი</th>
          <!-- <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
            <th pSortableColumn="category">Category <p-sortIcon field="category"></p-sortIcon></th>
            <th pSortableColumn="rating">Reviews <p-sortIcon field="rating"></p-sortIcon></th>
            <th pSortableColumn="inventoryStatus">Status <p-sortIcon field="inventoryStatus"></p-sortIcon></th> -->
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-attribute let-expanded="expanded">
        <tr>
          <td>
                <button
                type="button" 
                pButton 
                pRipple 
                [pRowToggler]="attribute" 
                class="p-button-text p-button-rounded p-button-plain" 
                [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
            </td>
          <td>{{attribute.id}}</td>
          <td>{{attribute.title}}</td>
          <td>
            <ng-container *ngIf="attribute.isStandard()">სტანდარტული</ng-container>
            <ng-container *ngIf="attribute.isTree()">ხე</ng-container>
            <ng-container *ngIf="attribute.isEntity()">ობიექტი</ng-container>
          </td>
          <td>
            <p-inputSwitch  [(ngModel)] ="attribute.lazy"></p-inputSwitch>
            
            <!-- <div class="p-inputgroup">
              <p-inputSwitch
                  [(ngModel)]="value"
                  [class.ng-invalid]="!valid()"
                  [class.ng-dirty]="!valid()"
                  (ngModelChange)="onUpdate()"
              ></p-inputSwitch>
          </div> -->
          </td>
          <td><p-inputSwitch  [(ngModel)] ="attribute.status"></p-inputSwitch></td>
          <!-- <td><img [src]="'assets/showcase/images/demo/product/' + product.image" [alt]="product.name" width="100" class="shadow-4" /></td>
            <td>{{product.price | currency:'USD'}}</td>
            <td>{{product.category}}</td>
            <td><p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating></td>
            <td><span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span></td> -->
        </tr>
      </ng-template>
      <ng-template pTemplate="rowexpansion" let-attribute>
        <tr>
          <td colspan="7">
                <div class="p-3">
                    <p-table [value]="attribute.properties" dataKey="id">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>ID</th>
                                <th>წყარო</th>
                                <th>ატრიბუტის ტიპი</th>
                                <th>დასახელება</th>
                                <th>მონაცემის ტიპი</th>
                                <th>ველის ტიპი</th>
                                <th>აუცილებელი ველი</th>
                                <th>ფილტრაციის შესაძლებლობა</th>
                                <th>მთავარი პარამეტრი</th>
                                <!-- <th pSortableColumn="customer">Customer <p-sortIcon field="customer"></p-sortIcon></th>
                                <th pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon></th>
                                <th pSortableColumn="amount">Amount <p-sortIcon field="amount"></p-sortIcon></th>
                                <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
                                <th style="width: 4rem"></th> -->
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-property>
                            <tr>
                                <td>{{property.id}}</td>
                                <td>{{property.source_attr_id}}</td>
                                <td>
                                  <ng-container *ngIf="property.isSection()">სექცია</ng-container>
                                  <!-- <ng-container *ngIf="property.isAttr()">ატრიბუტი</ng-container> -->
                                </td>
                                <td>{{property.title}}</td>
                                <td>
                                  <p-dropdown
                                    [options]="DATA_TYPES"
                                    placeholder="{{property.title}} - ის ტიპი"
                                    [(ngModel)]="selectedPropTypes[attribute.id][property.id]"
                                    name="id"
                                    optionLabel="title"
                                ></p-dropdown>
                                </td>
                                <td>
                                  <p-dropdown
                                    [options]="DATA_VIEW_TYPES"
                                    placeholder="{{property.title}} - ის ტიპი"
                                    [(ngModel)]="selectedPropViewTypes[attribute.id][property.id]"
                                    name="id"
                                    optionLabel="title"
                                ></p-dropdown>
                                </td>
                                <td>
                                  <p-inputSwitch  [(ngModel)] ="property.is_mandatory"></p-inputSwitch>
                                </td>
                                <td>
                                  <p-inputSwitch  [(ngModel)] ="property.has_filter"></p-inputSwitch>
                                </td>
                                <td>
                                  <p-inputSwitch  [(ngModel)] ="property.is_primary"></p-inputSwitch>
                                </td>
                                <!-- <td>{{order.customer}}</td>
                                <td>{{order.id}}</td>
                                <td>{{order.amount | currency:'USD'}}</td>
                                <td><span [class]="'order-badge order-' + order.status.toLowerCase()">{{order.status}}</span></td>
                                <td><p-button type="button" icon="pi pi-search"></p-button></td> -->
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td colspan="6">There are no order for this product yet.</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</section>